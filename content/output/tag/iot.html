<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>A Pelican Blog - IOT</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Pelican Blog </a></h1>
                <nav><ul>
                    <li><a href="/category/electronics.html">Electronics</a></li>
                    <li><a href="/category/free-software.html">Free Software</a></li>
                    <li><a href="/category/free-software-latex-publications.html">Free Software, Latex, Publications</a></li>
                    <li><a href="/category/free-software-linux.html">Free Software, Linux</a></li>
                    <li><a href="/category/free-software-matlab-plasmonics.html">Free Software, Matlab, Plasmonics</a></li>
                    <li><a href="/category/free-software-plasmonics.html">Free Software, Plasmonics</a></li>
                    <li><a href="/category/free-software-plasmonics-publications.html">Free Software, Plasmonics, Publications</a></li>
                    <li><a href="/category/linux-ramblings.html">Linux, Ramblings</a></li>
                    <li><a href="/category/matlab.html">Matlab</a></li>
                    <li><a href="/category/plasmonics.html">Plasmonics</a></li>
                    <li><a href="/category/plasmonics-publications.html">Plasmonics, Publications</a></li>
                    <li><a href="/category/plasmonics-researc.html">Plasmonics, Researc</a></li>
                    <li><a href="/category/publications.html">Publications</a></li>
                    <li><a href="/category/publications-test-equipment.html">Publications, Test Equipment</a></li>
                    <li><a href="/category/python.html">Python</a></li>
                    <li><a href="/category/test-equipment.html">Test Equipment</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/did-i-turn-off-the-stove-esp8266.html">Did I turn off the stove...ESP8266</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-10-08T12:27:00+00:00">
                Published: Sat 08 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/juluribk.html">juluribk</a>
        </address>
<p>In <a href="/category/electronics.html">Electronics</a>.</p>
<p>tags: <a href="/tag/esp8266.html">ESP8266</a> <a href="/tag/iot.html">IOT</a> </p>
</footer><!-- /.post-info --><p>My wife and I leave the house after a good meal and after like 20 minutes in the car, I ask my wife…did we turn off the stove? My wife answers…you were the last one to cook. What to do now? Go back home and check it. Now, that sucks.</p>
<p>To solve this common problem, I came up with a solution to use internet of things (IOT) to monitor stove status. So here is a final product, a URL I type in my browser and I can see the stove status.</p>
<p><a href="http://juluribk.com/wp-content/uploads/2016/10/Capture.png"><img alt="capture" class="aligncenter wp-image-1718" height="136" src="http://juluribk.com/wp-content/uploads/2016/10/Capture-1024x144.png" width="964"></a></p>
<p>How to do IOT cheaply? use ESP8266 module. If you don’t know what I am talking about, ESP8266 is a cheap (4 \$) wifi and microcontroller soc module. To learn more about ESP8266, sthe <a href="http://neilkolban.com/tech/esp8266/">book by Kolbans</a>. 
It can be programmed to connect to wifi network and act as tcp server or tcp client. In addition to connecting to network, it has numerous general purpose inputs-outputs (GPIO), one analog to digital converter (ADC) and couple of PWM’s. TCP server can be used to serve an html page which the status of GPIO pin or read ADC embedded in it. Coding for ESP8266 is done in C programming language, once compiled with toolchain, it can be flashed onto the flash memory. More details on how to compile and flash are described in detail in Kolbans book.</p>
<p>So coming back to the main point of the article, how did I read the status of my stove, I used the “burner on” led light on my stove which get turned on when any burner is “on”. I read the status of the “burner on” led light by placing a phototranistor close to it (as shown in the schematic below) and the end of phototransistor is fed to a GPIO. If the “burner on” is on then one of the GPIO reads high and if the “burner on” is off then GPIO reads low. One can also use a temperature sensor for this purpose, but “burner on” method works for my stove. </p>
<p>This is the schematic of the project:</p>
<p><a href="http://juluribk.com/wp-content/uploads/2016/10/text6666.png"><img alt="text6666" class="aligncenter wp-image-1719" height="510" src="http://juluribk.com/wp-content/uploads/2016/10/text6666-1024x1006.png" width="519"></a></p>
<p>Two USB-UARTS are used in the project while prototyping. One is used for flashing and other is used for debugging. Note that one has to reset power before flashing. Flashing is done by <a href="https://github.com/themadinventor/esptool">esptool.py</a>.</p>
<p>Here is a prototype on breadboard:</p>
<p><a href="http://juluribk.com/wp-content/uploads/2016/10/prototype.png"><img alt="prototype" class="aligncenter wp-image-1721" height="339" src="http://juluribk.com/wp-content/uploads/2016/10/prototype-1024x704.png" width="493"></a>  </p>
<p>Once the code is flashed onto the esp8266, it should be serving the status of stove. But this only works on local network. How to get the stove status outside my network i.e, when I am not at home? This can be done by assigning a static IP, a port to esp8266 and using dynamic DNS forwarding on my router (a good tutorial on how to do this <a href="http://www.howtogeek.com/66438/how-to-easily-access-your-home-network-from-anywhere-with-ddns/">is here</a>. There are many free dynamic dns services out there than can be used. With these modifications, I can now access the stove status from any place in the world.  </p>
<p>Here is final implementation of the project.</p>
<p><img alt="" src="/images/stove_status_implementation.jpg" title="Implementation">
<img alt="" src="/images/stove_status_prototype_box.png.jpg" title="Final prototype"></p>
<div class ="alert alert-primary">
<p>
<strong>Code</strong> for this project is available <a href="https://github.com/plasmon360/esp8266_c_examples/tree/master/examples/did_i_turn_off_my_stove"> at my gihub page</a>
</p>
</div>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>