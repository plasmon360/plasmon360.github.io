<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  Did I turn off the stove...ESP8266 | Bala Juluri
</title>
  <link rel="canonical" href="./did-i-turn-off-the-stove-esp8266.html">


  <link rel="stylesheet" href="./theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="./theme/css/fontawesome.min.css">
  <link rel="stylesheet" href="./theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="./theme/css/theme.css">

  <link rel="alternate" type="application/atom+xml" title="Full Atom Feed"
        href="plasmon360.github.io/feeds/all.atom.xml">
  <link rel="alternate" type="application/atom+xml" title="Categories Atom Feed"
        href="plasmon360.github.io/feeds/electronics.atom.xml">  
  <meta name="description" content="My wife and I have a good meal and leave the house. After 20 minutes or so, we are in the car and I ask my wife, did we turn off the stove? My wife answers…you were the last one to cook. What to do now? Go back home …">
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o);
      a.async = 1;
      a.src = g;
      m = s.getElementsByTagName(o)[0];
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-27406008-1', 'auto');
    ga('send', 'pageview');
  </script>


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
  <div class="col-sm-12">
    <h1 class="title"><a href="./">Bala Juluri</a></h1>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  Did I turn off the stove...ESP8266
</h1>
      <hr>
  <article class="article">
    <header>
      <ul class="list-inline">
        <li class="list-inline-item text-muted" title="2016-10-08T12:27:00-07:00">
          <i class="fas fa-clock"></i>
          Sat 08 October 2016
        </li>
        <li class="list-inline-item">
          <i class="fas fa-folder-open"></i>
          <a href="./category/electronics.html">Electronics</a>
        </li>
          <li class="list-inline-item">
            <i class="fas fa-tag"></i>
              <a href="./tag/esp8266.html">#ESP8266</a>,               <a href="./tag/iot.html">#IOT</a>          </li>
      </ul>
    </header>
    <div class="content">
      <p>My wife and I have a good meal and leave the house. After 20 minutes or so, we are in the car and I ask my wife, did we turn off the stove? </p>
<p>My wife answers…you were the last one to cook. What to do now? Go back home and check it. Now, that sucks.</p>
<p>To solve this common problem, I came up with a solution to use internet of things (IOT) to monitor stove status. So here is a final product, a URL I type in my browser and I can see the stove status.</p>
<p><img alt="" src="./images/Capture.png" title="Schematic"></p>
<p>How to do IOT cheaply? use ESP8266 module. If you don’t know what I am talking about, ESP8266 is a cheap (4$) wifi and microcontroller soc module. To learn more about ESP8266, sthe <a href="http://neilkolban.com/tech/esp8266/">book by Kolbans</a>. 
It can be programmed to connect to wifi network and act as tcp server or tcp client. In addition to connecting to network, it has numerous general purpose inputs-outputs (GPIO), one analog to digital converter (ADC) and couple of PWM’s. TCP server can be used to serve an html page which the status of GPIO pin or read ADC embedded in it. Coding for ESP8266 is done in C programming language, once compiled with toolchain, it can be flashed onto the flash memory. More details on how to compile and flash are described in detail in Kolbans book.</p>
<p>So coming back to the main point of the article, how did I read the status of my stove, I used the “burner on” led light on my stove which get turned on when any burner is “on”. I read the status of the “burner on” led light by placing a phototranistor close to it (as shown in the schematic below) and the end of phototransistor is fed to a GPIO. If the “burner on” is on then one of the GPIO reads high and if the “burner on” is off then GPIO reads low. One can also use a temperature sensor for this purpose, but “burner on” method works for my stove. </p>
<p>This is the schematic of the project:
<img alt="" src="./images/text6666-1024x1006.png" title="Schematic"></p>
<p>Two USB-UARTS are used in the project while prototyping. One is used for flashing and other is used for debugging. Note that one has to reset power before flashing. Flashing is done by <a href="https://github.com/themadinventor/esptool">esptool.py</a>.</p>
<p>Here is a prototype on breadboard:
<img alt="" src="./images/prototype-1024x704.png" title="Prototype"></p>
<p>Once the code is flashed onto the esp8266, it should be serving the status of stove. But this only works on local network. How to get the stove status outside my network i.e, when I am not at home? This can be done by assigning a static IP, a port to esp8266 and using dynamic DNS forwarding on my router (a good tutorial on how to do this <a href="http://www.howtogeek.com/66438/how-to-easily-access-your-home-network-from-anywhere-with-ddns/">is here</a>. There are many free dynamic dns services out there than can be used. With these modifications, I can now access the stove status from any place in the world.  </p>
<p>Here is final implementation of the project.</p>
<p><img alt="" src="./images/stove_status_implementation.jpg" title="Implementation">
<img alt="" src="./images/stove_status_prototype_box.png.jpg" title="Final prototype"></p>
<div class ="alert alert-primary">
<p>
<strong>Code</strong> for this project is available <a href="https://github.com/plasmon360/esp8266_c_examples/tree/master/examples/did_i_turn_off_my_stove"> at my gihub page</a>
</p>
</div>
    </div>
  </article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
    <li class="list-inline-item"><a href="./archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="./categories.html">Categories</a></li>
      <li class="list-inline-item"><a href="./tags.html">Tags</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>    </div>
  </footer>

</body>

</html>